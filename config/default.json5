// Agentic OS â€” Master Configuration
// JSON5 format: comments allowed, trailing commas OK, unquoted keys permitted.
// Validated against the AgenticOsConfig schema in @agentic-os/core.
{
  gateway: {
    nats: {
      url: "nats://localhost:4222",
    },
    redis: {
      url: "redis://localhost:6379",
    },
    websocket: {
      port: 18789,
    },
    maxConcurrentAgents: 5,
  },

  agents: {
    defaults: {
      model: "pi-mono",
      contextWindow: 128000,
      reserveTokens: 20000,
      maxTurns: 100,
    },
    list: [
      // Example agent entry:
      // {
      //   id: "assistant",
      //   name: "Assistant",
      //   description: "General-purpose assistant agent",
      //   model: "pi-mono",
      //   persona: "SOUL.md",
      //   tools: { allow: ["*"] },
      //   skills: [],
      //   mcpPinned: [],
      // },
    ],
  },

  bindings: [
    // Example binding:
    // { channel: "default", agentId: "assistant" },
  ],

  models: {
    providers: [
      {
        id: "pi-mono",
        type: "pi-mono",
        models: ["claude-sonnet-4-20250514"],
        profiles: ["default"],
      },
    ],
    fallbacks: [],
  },

  auth: {
    profiles: [
      {
        id: "default",
        provider: "anthropic",
        apiKeyEnv: "ANTHROPIC_API_KEY",
      },
    ],
  },

  session: {
    idleTimeoutMs: 1800000, // 30 minutes
    maxHistoryEntries: 1000,
    compaction: {
      enabled: true,
      reserveTokens: 20000,
    },
  },

  tools: {
    allow: ["*"],
    deny: [],
    mcpServers: [
      // {
      //   name: "example",
      //   transport: "stdio",
      //   command: "npx",
      //   args: ["-y", "@example/mcp-server"],
      // },
    ],
  },

  sandbox: {
    mode: "off",
    scope: "session",
    docker: {
      image: "agentic-os-sandbox:latest",
      memoryLimit: "512m",
      cpuLimit: "1.0",
      pidsLimit: 256,
      networkMode: "none",
      readOnlyRoot: true,
      tmpfsSize: "100m",
      timeout: 30,
    },
  },

  plugins: {
    directories: [],
    enabled: [],
    disabled: [],
  },

  memory: {
    enabled: true,
    embedding: {
      provider: 'openai',           // 'openai' | 'none'
      dimensions: 1024,
      model: 'text-embedding-3-large',
      apiKeyEnv: 'OPENAI_API_KEY',
      batchSize: 64,
    },
    search: {
      vectorWeight: 0.7,
      bm25Weight: 0.3,
      decayHalfLifeDays: 30,
      mmrLambda: 0.6,
      defaultMaxResults: 10,
    },
    chunking: {
      targetTokens: 400,
      overlapTokens: 80,
      maxChunkTokens: 600,
    },
    importanceScoring: {
      enabled: true,
      defaultImportance: 0.5,
    },
    dailyLog: {
      enabled: true,
      directory: 'memory',
    },
  },
}
